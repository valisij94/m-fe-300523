## Практическое занятие №2

### Тема: React.js. Работа с библиотекой react-hook-form. Redux State management

Репозитарий содержит материалы по практическому занятию №2, посвященному работе с библиотекой react-hook-form, и работе с Redux.

### Цели занятия
- закрепление знаний, полученных на лекции;
- разбор практических примеров;
- практическое применение полученных знаний.

### Задачи занятия
1. На прошлом занятии, мы сделали форму регистрации (страница RegisterPage). Данные формы хранились в локальном стейте компонента. Теперь поработаем с react-hook-form. Нужно зарегистрировать нашу форму регистрации с помощью хука `useForm`, и при клике на кнопку выводить в консоль данные формы.
2. Добавляем валидацию. Нужно, чтобы поля name, login, password, email были обязательны к заполнению. Пока что реализовать такую логику, чтобы при клике на "Send", если у нас есть ошибки, в консоль выводилось бы сообщение "Please, fix all errors!". Для этого, нам нужно передавать в `handleSubmit` второй аргумент - функцию-колбэк, которая будет вызываться, если форма невалидная.
3. Усложняем валидацию. Нужно чтобы у каждого поля было свое сообщение об ошибке. Для login - "Please, fill the login", для name - "Do not shy, enter your name!".
4. Добавляем рендеринг сообщений об ошибках. Нужно, чтобы соответствующие сообщения об ошибках рендерились под соответствующими инпутами. То есть, сообщение о незаполенной фамилии рендерилось бы под инпутом LastName, а сообщение о незаполненном имени - под инпутом FirstName. Сообщения об ошибках рендерить как параграфы, добавлять им класс `errorField` из импортированного модуля стилей.
5. Добавляем ограничение длины имени. Минимальная длина - 3, максимальная - 12 символов.
6. Добавляем еще один инпут, емейл. Он тоже должен быть обязательным. Сообщение о незаполненном емейле: "I do not believe that you have no email!"
7. Добавляем валидацию емейла. Рекомендуется это делать через регулярные выражения. Шаблон емейла (максимально упрощенный):
```
/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/
```

### React-Redux
1. Добавляем Redux-стейт в наше приложение. Библиотеки уже добавлены, так что можно с ними работать. Сейчас, в нашем `store` предполагается хранить данные пользователя (логин и пароль), которые он введет в компоненте `RegisterPage`. Структура объекта `store`:
```
store = {
    userData: {
        username: 'Vasilij',
        password: 'TopSikret!'
        email: 'email@gmail.com'
    }
}
```

Что нужно сделать:
 - создать в проекте папку `store`
 - в этой папке, создать папку `reducers` - здсь будут наши редьюсеры
 - также создать папку `actions` - здсь будут `actionCreators`
 - создаем первые экшны. Пока что нам нужен только один тип экшна - `addUserData`, то есть добавляем данные пользователя. Тип - `USER_ACTIONS/ADD_USER`. Сам `actionCreator` будет принимать логин и пароль, и создавать объект-экшн.
 - создаем первый редьюсер в папке`reducers`. Называем его `userReducer.js`. И обрабатываем в нем наш экшн из предыдущего пункта. Нужно записать в `store.userData` логин и пароль, которые возьмем из данных экшна.
 - в папке `store` создать файл `store.js` - здесь мы инициализируем наш редакс-стейт, создаем `store`, и экспортируем его. При создании стора, ОБЯЗАТЕЛЬНО используем `combineReducers` - он нам понадобится дальше.
2. В компоненте `RegisterPage`, нужно на событие клика на кнопку "Войти", сохранять данные в редакс-стейте. Для этого, нам поможет хук `useDispatch`.
3. Теперь извлечем эти данные из стейта. В компонент `Home`, добавим параграф, который будет выводить на экране (над кнопками), текст приветствия. Если у нас в стейте есть данные пользователя - то выводим "Добро пожаловать, ИМЯ", а иначе - "Приветствуем тебя, незнакомец".
4. Расширяем стейт, работаем с постами. Нам нужно создать еще 2 компонента: `PostItem` (лдя рендеринга поста), и `PostsPage` - страницу, которая будет рендерить список постов. У поста есть заголовок и тело (head, title). Рендерим их тегами `h2`, `p` соответственно.
5. Добавим запрос постов с адреса `https://jsonplaceholder.typicode.com/posts`. Этот запрос нужно выполнять при монтировании компонента `PostsPage`, и рендерить результат.
6. Теперь, перенесем наши посты в стейт. Нам нужно добавить еще кусок в наш стейт. Теперь он будет выглядеть так:
```
store = {
    userData: {/* User Data added in the previous task*/},
    posts: {
      postsList: [
        {id: 1, title: 'Title', ...},
        {id: 2, title: 'Header', ...}
      ]
    }
}
```
Нам понадобится создать экшны (`actions/postsActions.js`), и редьюсер (`reducers/postsReducer.js`). Пока что добавляем только экшн `addPosts`, который должен добавить в наш стейт данные о постах. И нужно будет в компоненте `PostaPage` вызвать dispatch этого экшна в нужный момент.
7. Усложняем часть стейта, которая отвечает за посты. Теперь она должна еще содержать флаг, идет ли загрузка постов. Пусть это будет флаг `isFetching`. И нужно создать соответствующие экшны для него (тут стоит подумать, как их лучше организовать).


### Полезные ссылки по занятию:
 - [React Redux](https://ru.react-redux.js.org/introduction/getting-started) - официальная русскоязычная(!) документация. О качестве перевода лучше не задумываться - чем богаты. Рекомендуется в качестве справочника. Есть очень толковые примеры.
 - [Описание React-Redux](https://medium.com/swlh/react-redux-hooks-5e5dbb52d057) - англоязычное, но рекомендуется к прочтению. Немало полезной информации о хуках, о том, как это работает "под капотом". Также там упоминается "старый" редакс, без хуков (`connect`). Имеет смысл ознакомиться - на собесах попадается.
 - [О работе редакс под капотом](https://ivaneroshkin.medium.com/%D0%BA%D0%B0%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-redux-a967d8616398) - это для глубокого понимания, как работает редакс, и для демонстрации того, что он НЕ зависит от реакта, и может использоваться в plain JS code.


### Полезные ссылки по занятию:
 - [React useForm](https://www.react-hook-form.com/get-started/) - англоязычная документация по хуку `useform`.
 - [Обучалка по useForm](https://blog.logrocket.com/react-hook-form-complete-guide/) - тоже англоязычное, но рекомендуется к прочтению - весьма толково, помогает разобраться в базовом использовании библиотеки.
 - [Видеоинструкция](https://www.youtube.com/watch?v=1_4yH0C9iq0) - немного сумбурно, но в целом тоже относительно толково. К просмотру рекомендуется ПОСЛЕ прочтения статьи из предыдущей ссылки.
